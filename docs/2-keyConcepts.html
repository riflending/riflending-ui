<h1 id="key-concepts">Key Concepts</h1>
<h2 id="account-">Account:</h2>
<p>In <strong>rLending</strong>, each account is represented by the <strong>rBTC</strong> address that holds the assets and administers the transactions.</p>
<p>&nbsp;</p>
<hr>
<h2 id="markets-">Markets:</h2>
<p>The smart contracts that power the <strong>rLending Protocol</strong> are deployed to the RSK blockchain. This means that at the time of this guide’s writing, the only types of assets that <strong>rLending</strong> can support are rBTC and ERC-20 tokens deployed on RSK.</p>
<p><strong>Markets</strong> are the internal architecture <strong>rLending</strong> uses for representing each asset listed in the protocol. They are essentially <em>a large pool of liquidity</em> that is formed by users providing liquidity and at the same time it is available for other users to borrow. Borrowers pay back their interests to the pool as they share in the interest with suppliers.</p>
<p><strong>Each underlying market is internally represented with a cToken</strong></p>
<p>&nbsp;</p>
<hr>
<h2 id="supplying-assets-">Supplying Assets:</h2>
<p>Unlike an exchange or peer-to-peer platform, where a user’s assets are matched and lent to another user, the <strong>rLending Protocol</strong> aggregates the supply of each account, effectively generating a pool from each listed market. In other words: <strong>when a user supplies an asset, it becomes a fungible resource</strong>. This approach offers <em>significantly</em> more liquidity than direct lending; unless every asset in a market is borrowed (see below: <a href="#liquidity">liquidity</a>), users can <a href="Withdrawals">withdraw</a> their assets at any time, without waiting for a specific loan to mature.</p>
<p>Assets supplied to a market are represented by an ERC-20 token balance (<a href="#cTokens">cToken</a>), which entitles the owner to an increasing quantity of the underlying asset. As the money market accrues interest, which is a function of borrowing demand, cTokens become convertible into an increasing amount of the underlying asset. <strong>In this way, earning interest is as simple as holding a ERC-20 cToken.</strong></p>
<p>&nbsp;</p>
<hr>
<h2 id="borrowing-assets-">Borrowing Assets:</h2>
<p><strong>rLending</strong> allows users to frictionlessly borrow from the protocol, using cTokens as collateral, <em>for use anywhere in the RSK ecosystem</em>. Unlike peer-to-peer protocols, borrowing from <strong>rLending</strong> simply requires a user to specify a desired asset; there are no terms to negotiate, maturity dates, or funding periods; <strong>borrowing is instant and predictable</strong>. Similar to supplying an asset, each listed market has a floating interest rate, set by market forces, which determines the borrowing cost for each asset.</p>
<p>&nbsp;</p>
<hr>
<h2 id="ctokens-">cTokens:</h2>
<p>Each asset supported by the <a href="https://github.com/riflending/rlending-protocol"><strong>rLending Protocol</strong></a> is integrated through a <strong>cToken Smart Contract subsystem</strong>, which is an <strong>EIP-20</strong> compliant representation of balances supplied to the protocol. By minting cTokens, users may:
1) Earn interest through the cToken&#39;s exchange rate, which increases in value relative to the underlying asset, and
2) Gain the ability to use cTokens as collateral for borrowing assets.</p>
<p>&nbsp;</p>
<hr>
<h2 id="earning-interests-">Earning Interests:</h2>
<p>When users and applications supply an asset to the <strong>rLending Protocol</strong>, they begin <strong>earning a variable interest rate instantly</strong>. Interest accrues every block (currently ~30 seconds) and users can <a href="#withdrawal">withdraw</a> their principal plus interest anytime. Under the hood, users are contributing their assets to a large pool of liquidity (a “<a href="#Markets">market”</a>) that is available for other users to borrow, and they share in the interest that borrowers pay back to the pool.</p>
<p>When users supply assets, they receive cTokens from <strong>rLending</strong> in exchange. cTokens are ERC20 tokens that can be redeemed for their underlying assets at any time. As interest accrues to the assets supplied, cTokens are redeemable at an exchange rate (relative to the underlying asset) that constantly increases over time, based on the rate of interest earned by the underlying asset.</p>
<p>&nbsp;</p>
<hr>
<h2 id="collateral-">Collateral:</h2>
<p>Assets held by the protocol (represented by ownership of a <a href="#cTokens">cToken</a>) are used as collateral to borrow from the protocol. Each <a href="#Markets">market</a> has a collateral factor, ranging from 0 to 1, that represents the portion of the underlying asset value that can be borrowed. <strong>The sum of the value of an accounts underlying token balances, multiplied by the collateral factors, equals a user’s borrowing capacity.</strong></p>
<p>Users are able to borrow up to, <em>but not exceeding</em>, their borrowing capacity, and an account can take no action (e.g. borrow, transfer cToken collateral, or redeem cToken collateral) that would raise the total value of borrowed assets above their borrowing capacity (<a href="#Borrow-Limit">borrow limit</a>); this protects the protocol from default risk.</p>
<p><strong>Collateral</strong> is the guarantee that users provide that allows them to borrow on any given market. In order to supply collateral, users must first activate the <em>Enter Market</em> toggle.</p>
<p><strong>Note that a user cannot borrow without having supplied collateral first.</strong></p>
<p>&nbsp;</p>
<hr>
<h2 id="borrow-limit-">Borrow Limit:</h2>
<p>The max borrowable amount an account has on a given market. This is calculated to be the account&#39;s <a href="#liquidity">liquidity</a> divided by the <a href="#Market-Price">market price</a> of the asset.</p>
<p>&nbsp;</p>
<hr>
<h2 id="contract-liquidity-">Contract Liquidity:</h2>
<p>The amount of underlying asset currently stored in the <a href="#cTokens">cToken</a> contract representing the market.</p>
<p>&nbsp;</p>
<hr>
<h2 id="supply-balance-">Supply Balance:</h2>
<p>The account&#39;s supply balance is given by <strong>the amount of cTokens the account has</strong>, converted to underlying by the current <a href="#Exchange-Rate">exchange rate</a>.</p>
<p>Remember that when users supply assets, they receive cTokens from <strong>rLending</strong> in exchange. cTokens are ERC20 tokens that can be redeemed (<a href="#withdrawals">withdrawed</a>) for their underlying assets at any time.</p>
<p>&nbsp;</p>
<hr>
<h2 id="exchange-rate-">Exchange Rate:</h2>
<p>The rate at which the protocol is currently converting between <strong>cToken</strong> and <strong>Underlying assets</strong>. This rate is ever increasing with each new block passing and this is how suppliers earn they interests.</p>
<p>&nbsp;</p>
<hr>
<h2 id="borrow-balance-">Borrow Balance:</h2>
<p><strong>The amount of cTokens the account has borrowed</strong> on a given market, converted to underlying by the current <a href="#exchange-rate">exchange rate</a>.</p>
<p>&nbsp;</p>
<hr>
<h2 id="debt-">Debt:</h2>
<p>Debt is calculated to be <strong>the sum of all borrowed balances</strong>, represented in <strong>USD</strong> by converting it through the current cToken-Underlying <a href="#exchange-rate">exchange rate</a> and multiplying by the <a href="#market-Price">market price</a>.</p>
<p>&nbsp;</p>
<hr>
<h2 id="close-factor-">Close Factor:</h2>
<p>The percent, ranging from 0% to 100%, of <a href="#debt">debt</a> eligible to be closed in a single liquidate transaction, after an account has gone underwater. Accounts go underwater when they run out of <a href="#liquidity">liquidity</a> or their <a href="#health-factor">Health Factor</a> becomes negative.
If a user has multiple borrowed assets, the Close Factor applies to any single borrowed asset, not the aggregated value of a user’s outstanding borrowing.</p>
<p>&nbsp;</p>
<hr>
<h2 id="liquidation-incentive-">Liquidation Incentive:</h2>
<p>The additional collateral given to liquidators as an incentive to perform liquidation of underwater accounts. For example, if the liquidation incentive is 1.1, liquidators receive an extra 10% of the borrowers collateral for every unit they close.</p>
<p>&nbsp;</p>
<hr>
<h2 id="market-price-">Market Price:</h2>
<p>The current price in <strong>USD</strong> for a given asset, as provided by the Oracles subsystem.</p>
<p>&nbsp;</p>
<hr>
<h2 id="withdrawals-">Withdrawals:</h2>
<p>Users that have non-negative health factor are able to withdraw their liquidity at any time. This action performs a transaction that redeems available cTokens for an the equivalent amount of underlying asset according to the current <strong>Exchange Rate</strong>.</p>
<p>&nbsp;</p>
<hr>
<h2 id="repay-">Repay:</h2>
<p>Users that have <strong>Borrow Balance</strong> are able to <strong>Repay</strong> their debt in order to partially reduce it or cancel it.</p>
<p>&nbsp;</p>
<hr>
<h2 id="liquidity-">Liquidity:</h2>
<p>Account Liquidity <strong>represents the USD value borrowable</strong> by a user, before it reaches liquidation. Users with a shortfall (<em>negative liquidity</em>) are subject to liquidation and can’t withdraw or borrow assets until their Account Liquidity is positive again.</p>
<p>For each market the user has entered into, their supplied balance is multiplied by the market’s <strong>collateral factor</strong>, and summed; borrow balances are then subtracted, to equal Account Liquidity. In other words: <em>Borrowing an asset reduces Account Liquidity for each USD borrowed</em>.
At the same time, withdrawing an asset reduces Account Liquidity by the asset’s <strong>collateral factor</strong> times each USD withdrawn.</p>
<p>&nbsp;</p>
<hr>
<h2 id="collateral-factor-">Collateral Factor:</h2>
<p>The percentage of supplied assets that is required to be collateralized when a user enters a market for borrowing purposes.</p>
<p>&nbsp;</p>
<hr>
<h2 id="health-factor-">Health Factor:</h2>
<p><strong>Health Factor</strong> is the result of a formula that calculates how close an account is to being liquidated. If an account becomes under-collateralized (<em>negative Health Factor</em>) it runs the risk of having it&#39;s shortfall liquidated. This would be bad.</p>
<p>&nbsp;</p>
<hr>
<h2 id="governance-and-administrators-">Governance and Administrators:</h2>
<p>The <strong>rLending protocol</strong> does not support specific tokens by default; instead, markets must be whitelisted. This is accomplished with an admin function, supportMarket(address market, address interest rate model) that allows users to begin interacting with the asset. In order to borrow an asset, there must be a valid price from the Price Oracle; in order to use an asset as collateral, there must be a valid price and a collateralFactor.
Each function call is validated through a policy layer, referred to as <em>the Comptroller</em> ; this contract validates collateral and liquidity, before allowing a user action to proceed.</p>
<p><strong>rLending</strong> started with partially decentralized control of the protocol (such as choosing the interest rate model per asset). The protocol is protected by a multi-signature smart contract, requiring the agreement of several accounts in order to perform changes to the protocol.</p>
<p>The following rights in the protocol are controlled by the Multi-sig:</p>
<ul>
<li>The ability to list a new cToken market</li>
<li>The ability to update the interest rate model per market</li>
<li>The ability to update the oracle or any adapter address</li>
<li>The ability to withdraw the reserve of a cToken</li>
<li>The ability to update the Comptroller contract</li>
<li>The ability to choose a new admin</li>
</ul>
<p>&nbsp;</p>
<hr>
<p><a href="1-introduction.html">Introduction</a>
<a href="2-keyConcepts.html">Key Concepts</a>
<a href="3-howTo.html">How To</a>
<a href="4-financialMath.html">Financial Aspects and Math</a>
<a href="5-contracts.html">Contracts</a>
<a href="6-oracles.html">Oracles</a>
<a href="7-securityAudits.html">Security and Audits</a></p>
